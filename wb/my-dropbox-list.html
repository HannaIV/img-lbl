<!doctype html>
<html lang="en">

<head>
  <title>Dropbox list</title>
  <meta charset="utf-8">

</head>

<body>
  <nav>
    <h1>My dropbox:</h1>
    <ul id='lst'>â€‹</ul>
  </nav>

  <script type="text/javascript">
    "use strict";
    fetch("https://api.dropboxapi.com/2/files/list_folder", {
      body: JSON.stringify({
        "path": "/WannaBY/incoming"
      }),
      headers: {
        Authorization: "Bearer YS1x4kZ9tZcAAAAAAAAY3UCJt8tYrE1iwS7F7LKqVYQVZG3BHwRFio1YKMmENyCp",
        "Content-Type": "application/json"
      },
      method: "POST"
    }).then(
      function(response) {
        if (response.status == 200) {
          response.json().then(listDrFolder);
        }
      }
    );

    function listDrFolder(contents) {
      var ul = document.getElementById('lst');
      //ul.innerHTML += `<li>${contents.entries[contents.entries.length-1].name}</li>`;

      for (var i = 0; i < contents.entries.length; i++) {
        ul.innerHTML += `<li>${contents.entries[i].name}</li>`
        console.log(contents.entries[i].name);
      }
    }
  </script>
</body>

</html>
